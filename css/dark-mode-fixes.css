/**
 * Dark Mode Fixes for HTML Components
 * These styles provide targeted fixes for specific HTML components in dark mode
 */

/* Fix for buttons in dark mode */
body.dark-mode .btn-outline-secondary {
    color: var(--text-color);
    border-color: var(--border-color);
}

body.dark-mode .btn-outline-secondary:hover {
    background-color: rgba(255, 255, 255, 0.1);
}

body.dark-mode .btn-light {
    background-color: var(--card-bg);
    color: var(--text-color);
    border-color: var(--border-color);
}

/* Fix for code and pre elements */
body.dark-mode code, 
body.dark-mode pre {
    background-color: #2d2d2d;
    color: #f8f8f2;
    border-color: var(--border-color);
}

/* Fix for badges */
body.dark-mode .badge.bg-secondary {
    background-color: #505050 !important;
}

/* Fix for alerts */
body.dark-mode .alert {
    background-color: var(--card-bg);
    border-color: var(--border-color);
    color: var(--text-color);
}

body.dark-mode .alert-primary {
    border-color: #0d6efd;
}

body.dark-mode .alert-secondary {
    border-color: #6c757d;
}

body.dark-mode .alert-success {
    border-color: #198754;
}

body.dark-mode .alert-danger {
    border-color: #dc3545;
}

body.dark-mode .alert-warning {
    border-color: #ffc107;
}

body.dark-mode .alert-info {
    border-color: #0dcaf0;
}

/* Fix for form validation states */
body.dark-mode .form-control.is-valid,
body.dark-mode .was-validated .form-control:valid {
    border-color: #198754;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e");
}

body.dark-mode .form-control.is-invalid,
body.dark-mode .was-validated .form-control:invalid {
    border-color: #dc3545;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e");
}

/* Fix for tooltips and popovers */
body.dark-mode .tooltip-inner {
    background-color: #222;
    color: #fff;
}

body.dark-mode .bs-tooltip-auto[data-popper-placement^=top] .tooltip-arrow::before, 
body.dark-mode .bs-tooltip-top .tooltip-arrow::before {
    border-top-color: #222;
}

body.dark-mode .popover {
    background-color: var(--card-bg);
    border-color: var(--border-color);
}

body.dark-mode .popover-header {
    background-color: var(--table-header-bg);
    border-bottom-color: var(--border-color);
    color: var(--text-color);
}

body.dark-mode .popover-body {
    color: var(--text-color);
}

/* Fix for specific header elements */
body.dark-mode header.bg-white h5,
body.dark-mode header.bg-white h6,
body.dark-mode header.bg-white p {
    color: var(--text-color);
}

/* Fix for toast components */
body.dark-mode .toast {
    background-color: var(--card-bg);
    border-color: var(--border-color);
}

body.dark-mode .toast-header {
    background-color: var(--table-header-bg);
    border-color: var(--border-color);
    color: var(--text-color);
}

body.dark-mode .toast-body {
    color: var(--text-color);
}

/* SweetAlert2 fixes for dark mode */
body.dark-mode .swal2-popup {
    background-color: var(--card-bg);
    color: var(--text-color);
}

body.dark-mode .swal2-title,
body.dark-mode .swal2-content {
    color: var(--text-color);
}

body.dark-mode .swal2-input,
body.dark-mode .swal2-select,
body.dark-mode .swal2-textarea {
    background-color: var(--card-bg);
    color: var(--text-color);
    border-color: var(--border-color);
}

/* Dropdown menu fixes */
body.dark-mode .dropdown-menu {
    background-color: var(--card-bg);
    border-color: var(--border-color);
}

body.dark-mode .dropdown-item {
    color: var(--text-color);
}

body.dark-mode .dropdown-item:hover,
body.dark-mode .dropdown-item:focus {
    background-color: rgba(255, 255, 255, 0.1);
    color: var(--text-color);
}

body.dark-mode .dropdown-divider {
    border-color: var(--border-color);
}

/* Fix for text-dark class that might be used */
body.dark-mode .text-dark {
    color: var(--text-color) !important;
}

/* Fix for cards with white backgrounds explicitly set */
body.dark-mode [style*="background-color: white"],
body.dark-mode [style*="background-color:#fff"],
body.dark-mode [style*="background-color: #fff"],
body.dark-mode [style*="background-color:#ffffff"],
body.dark-mode [style*="background-color: #ffffff"] {
    background-color: var(--card-bg) !important;
    color: var(--text-color);
}

/* Advanced DataTable Fixes */
body.dark-mode .dataTables_wrapper .dataTables_length,
body.dark-mode .dataTables_wrapper .dataTables_filter,
body.dark-mode .dataTables_wrapper .dataTables_info,
body.dark-mode .dataTables_wrapper .dataTables_processing,
body.dark-mode .dataTables_wrapper .dataTables_paginate {
    color: var(--text-color);
}

body.dark-mode .dataTables_wrapper .dataTables_paginate .paginate_button {
    color: var(--text-color) !important;
    background-color: transparent;
    border: 1px solid var(--border-color);
}

body.dark-mode .dataTables_wrapper .dataTables_paginate .paginate_button.disabled,
body.dark-mode .dataTables_wrapper .dataTables_paginate .paginate_button.disabled:hover,
body.dark-mode .dataTables_wrapper .dataTables_paginate .paginate_button.disabled:active {
    color: rgba(255, 255, 255, 0.3) !important;
    border: 1px solid var(--border-color);
    background-color: transparent;
}

body.dark-mode table.dataTable tbody tr {
    background-color: var(--card-bg);
    color: var(--text-color);
}

body.dark-mode .dataTables_wrapper .dataTables_info {
    color: var(--text-color);
}

/* Additional specific fixes for DataTables */
body.dark-mode div.dt-buttons button.dt-button,
body.dark-mode div.dt-buttons div.dt-button,
body.dark-mode div.dt-buttons a.dt-button,
body.dark-mode div.dt-buttons input.dt-button {
    background-color: var(--card-bg);
    color: var(--text-color);
    border-color: var(--border-color);
}

body.dark-mode div.dt-buttons button.dt-button:hover:not(.disabled),
body.dark-mode div.dt-buttons div.dt-button:hover:not(.disabled),
body.dark-mode div.dt-buttons a.dt-button:hover:not(.disabled),
body.dark-mode div.dt-buttons input.dt-button:hover:not(.disabled) {
    background-color: rgba(255, 255, 255, 0.05);
    color: var(--text-color);
}

/* Fix for Bootstrap 5 styling */
body.dark-mode table.table-dark {
    --bs-table-bg: var(--card-bg);
    --bs-table-striped-bg: rgba(0, 0, 0, 0.2);
    --bs-table-striped-color: var(--text-color);
    --bs-table-active-bg: rgba(255, 255, 255, 0.05);
    --bs-table-active-color: var(--text-color);
    --bs-table-hover-bg: rgba(255, 255, 255, 0.05);
    --bs-table-hover-color: var(--text-color);
    border-color: var(--border-color);
}

/* Fix for DataTables errors and alerts */
body.dark-mode div.dt-button-collection {
    background-color: var(--card-bg);
    border-color: var(--border-color);
}

body.dark-mode div.dt-button-collection button.dt-button,
body.dark-mode div.dt-button-collection div.dt-button,
body.dark-mode div.dt-button-collection a.dt-button {
    background-color: var(--card-bg);
    color: var(--text-color);
    border-color: var(--border-color);
}

body.dark-mode div.dt-button-collection button.dt-button:hover,
body.dark-mode div.dt-button-collection div.dt-button:hover,
body.dark-mode div.dt-button-collection a.dt-button:hover {
    background-color: rgba(255, 255, 255, 0.05);
}

/* Fix for search highlighting in dark mode */
body.dark-mode table.dataTable span.highlight {
    background-color: rgba(255, 77, 38, 0.3);
    color: white;
}

/* Fix for row details */
body.dark-mode table.dataTable tr.shown + tr,
body.dark-mode table.dataTable tr.detail-row {
    background-color: rgba(0, 0, 0, 0.2);
}

/* Fix for loading screens */
body.dark-mode .loading-screen {
    background: rgba(0, 0, 0, 0.8) !important;
}

body.dark-mode .loading-content {
    background-color: var(--card-bg) !important;
    color: var(--text-color) !important;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3) !important;
}

body.dark-mode .loading-text {
    color: var(--text-color) !important;
}

/* Fix for Select2 in dark mode */
body.dark-mode .select2-container--bootstrap-5 .select2-selection {
    background-color: var(--card-bg) !important;
    color: var(--text-color) !important;
    border-color: var(--border-color) !important;
}

body.dark-mode .select2-container--bootstrap-5 .select2-dropdown {
    background-color: var(--card-bg) !important;
    border-color: var(--border-color) !important;
}

body.dark-mode .select2-container--bootstrap-5 .select2-results__option {
    color: var(--text-color) !important;
}

body.dark-mode .select2-container--bootstrap-5 .select2-selection__rendered {
    color: var(--text-color) !important;
}

body.dark-mode .select2-container--bootstrap-5 .select2-selection__choice {
    background-color: rgba(255, 255, 255, 0.1) !important;
    color: var(--text-color) !important;
    border-color: var(--border-color) !important;
}

/* Fix for error alerts that often come from DataTables */
body.dark-mode div.DTE div.DTE_Processing_Indicator {
    background-color: var(--card-bg);
    color: var(--text-color);
    border: 1px solid var(--border-color);
}

body.dark-mode div.DTE_Field_Error,
body.dark-mode div.DTE div.DTE_Form_Error {
    background-color: #dc3545;
    color: white;
}

/* Fix for sorting icons */
body.dark-mode table.dataTable thead .sorting:after,
body.dark-mode table.dataTable thead .sorting_asc:after,
body.dark-mode table.dataTable thead .sorting_desc:after,
body.dark-mode table.dataTable thead .sorting_asc_disabled:after,
body.dark-mode table.dataTable thead .sorting_desc_disabled:after {
    opacity: 0.7;
}

/* Fix for nested tables */
body.dark-mode table.dataTable tr.child {
    background-color: rgba(0, 0, 0, 0.2);
}

body.dark-mode table.dataTable tr.child ul.dtr-details {
    color: var(--text-color);
}

body.dark-mode table.dataTable tr.child ul.dtr-details li {
    border-color: var(--border-color);
}

/* Fix for responsive tables */
body.dark-mode table.dataTable.dtr-inline.collapsed>tbody>tr>td.dtr-control:before,
body.dark-mode table.dataTable.dtr-inline.collapsed>tbody>tr>th.dtr-control:before {
    background-color: var(--primary-color);
    color: white;
}

/* Fix for processing indicator */
body.dark-mode .dataTables_processing {
    background: rgba(30, 30, 30, 0.9) !important;
    color: var(--text-color) !important;
}

/* Fix for specific elements that need light text in dark mode */
body.dark-mode header .text-muted,
body.dark-mode .detail-label,
body.dark-mode .text-muted {
    color: rgba(224, 224, 224, 0.75) !important;
}

/**
 * Specific fixes for uretim-siparisi-olustur.html modal and DataTables compatibility
 */
body.dark-mode #orderSummaryModal .modal-content {
    background-color: var(--card-bg);
    color: var(--text-color);
    border: none;
}

body.dark-mode #orderSummaryModal .modal-header,
body.dark-mode #orderSummaryModal .modal-footer {
    border-color: var(--border-color);
}

body.dark-mode #orderSummaryModal .quantity-badge {
    background-color: rgba(255, 255, 255, 0.05);
    color: var(--text-color);
}

body.dark-mode #orderSummaryModal .item-row {
    background-color: rgba(0, 0, 0, 0.2);
}

body.dark-mode #orderSummaryModal .item-row:hover {
    background-color: rgba(255, 255, 255, 0.05);
}

body.dark-mode #orderSummaryModal .quantity-value {
    color: var(--text-color);
}

body.dark-mode #orderTable .input-group .form-control {
    background-color: var(--card-bg);
    color: var(--text-color);
    border-color: var(--border-color);
}

body.dark-mode #orderTable .input-group .btn {
    border-color: var(--border-color);
}

body.dark-mode #orderTable .selected-tag {
    background-color: rgba(255, 255, 255, 0.1);
    border-color: var(--border-color);
    color: var(--text-color);
}

/**
 * Specific fixes for ticket-detay.html reply section
 */
body.dark-mode .reply-section {
    background-color: rgba(0, 0, 0, 0.2);
}

body.dark-mode .reply-item {
    border-color: var(--border-color);
}

body.dark-mode .reply-item .text-muted {
    color: rgba(224, 224, 224, 0.6) !important;
}

body.dark-mode .priority-badge.priority-high {
    background-color: #dc3545;
}

body.dark-mode .priority-badge.priority-medium {
    background-color: #ffc107;
    color: #212529;
}

body.dark-mode .priority-badge.priority-low {
    background-color: #198754;
}

body.dark-mode .status-badge.status-open {
    background-color: #0d6efd;
}

body.dark-mode .status-badge.status-closed {
    background-color: #6c757d;
}

body.dark-mode #imageModal .modal-content {
    background-color: var(--card-bg);
}

body.dark-mode #imageModal .modal-header {
    border-color: var(--border-color);
}

/**
 * Specific fixes for stok-sayimi-duzenle.html DataTable areas
 */
body.dark-mode .bg-light-warning {
    background-color: rgba(255, 193, 7, 0.2) !important;
}

body.dark-mode .quantity-control .form-control {
    background-color: var(--card-bg);
    color: var(--text-color);
}

body.dark-mode .form-control[readonly],
body.dark-mode .readonly-field {
    background-color: rgba(0, 0, 0, 0.2) !important;
    color: rgba(224, 224, 224, 0.7) !important;
    border-color: var(--border-color);
}

body.dark-mode .progress {
    background-color: rgba(0, 0, 0, 0.2);
} 